BSD소켓은 인터넷 소켓 또는 **Unix domain 소켓**에 대한 `**인터페이스**`이며, 프로세스 간의 통신(**IPC**)에 쓰인다.

**Berkeley Software Distribution**에서 개발되어 **BSD 소켓**이라는 이름이 붙었으며, **POSIX socket** 이라고도 불린다. 이 인터페이스는 현재 인터넷에서 실행되는 응용 프로그램들의 표준 인터페이스이다. 

**소켓은 인터넷을 연결하기 위해 사용되는거 아닌가?**

인터넷 뿐아니라 같은 디바이스 내에서 서로 다른 프로세스가 통신을 하는 과정에서도 소켓이 활용된다.

## 소켓 연결 프로세스

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/db74ba2d-24e4-4d4b-ae5c-07d99cd33ca1/eabad577-fbd9-4686-9986-508b78df70ed/Untitled.png)

### **Server**

**1. Socket** : 소켓 객체를 생성한다. 각 소켓은 file descriptor로 구분된다.

**2. Bind** : 1에서 생성한 소켓에게 IP 주소와 Port 번호를 연결한다.

**3. Listen** : 소켓은 클라이언트의 연결 요청을 기다린다.

**4. Accept** : 이 과정에서 서버는 소켓을 하나 더 생성한다. 클라이언트 소켓에서 연결 요청이 왔을 때 함수가 불려지며, Listen 소켓은 현재 클라이언트 말고 다른 클라이언트에서 올 수도 있는 요청을 대기해야 하기 때문에, 연결 요청이 온 소켓에 대해서 새로운 소켓을 만들어 연결해 준다.

**5. Send & Receive** : 연결을 맺은 클라이언트 소켓과 데이터를 주고받는 과정이다.

**6. Close Socket** : 클라이언트 소켓이 연결을 종료하면 연결되어 있던 소켓을 반환한다.

### **Client**

**1. Socket** : 서버와 같이 소켓 객체를 생성하는 과정이다.

**2. Connect** : 서버와는 달리 클라이언트 소켓은 bind 과정이 빠져있다. 이는 클라이언트가 연결을 요청하는 주체이기 때문에 굳이 포트 번호를 알고 있을 필요가 없기 때문이다. connect 과정에서 소켓에게는 임의의 소켓 번호가 부여되며, 서버 소켓과 연결을 맺는다(3-way handshake).

**3. Send & Receive** : 연결을 맺은 서버 소켓과 데이터를 주고받는 과정이다.

**4. Close Socket** : 서버와 연결을 종료하고 소켓에게 할당된 자원을 반납한다.

Unix 시스템에서는 소켓 또한 하나의 파일처럼 인식하며, 네트워크 입출력 또한 파일 입출력과 유사하게 다룬다. 하지만 TCP packet의 경우 payload의 크기가 커지면 패킷을 쪼개서 보내기 때문에, read 함수 한 번으로는 모든 데이터를 읽을 수 없다. 이러한 점을 보완하기 위해 실제 소켓 입출력 시 버퍼를 이용하는 경우가 많고, 버퍼를 이용하여 입력을 받거나 쓰는 함수는 write, read 함수의 래핑 함수이다.